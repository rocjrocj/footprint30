<!--
	NOTES:
	1. All tokens are represented by '$' sign in the template.curItemMC
	2. You can write your code only wherever mentioned.
	3. All occurrences of existing tokens will be replaced by their appropriate values.
	4. Blank lines will be removed automatically.
	5. Remove unnecessary comments before creating your template.
-->
<!DOCTYPE html>
<html><head>
<meta charset="UTF-8">
<meta name="authoring-tool" content="Adobe_Animate_CC">
<title>footprint30</title>
<!-- write your code here -->
<script src="https://use.typekit.net/kiv1woh.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>
<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
<script src="footprint30.js?1467475395896"></script>
<script src="CanvasInput.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
<script>

/***************************** text link class *****************************/
	// define a new TextLink class that extends / subclasses Text, and handles drawing a hit area
	// and implementing a hover color.
	function TextLink(text, font, color, hoverColor) {
		// this super class constructor reference is automatically created by createjs.extends:
		this.Text_constructor(text, font, color);
		this.hoverColor = hoverColor;
		this.hover = false;
		this.hitArea = new createjs.Shape();
		this.textBaseline = "top";
		this.addEventListener("rollover", this);
		this.addEventListener("rollout", this);
	}
	createjs.extend(TextLink, createjs.Text);
	// use the same approach with draw:
	TextLink.prototype.draw = function (ctx, ignoreCache) {
		// save default color, and overwrite it with the hover color if appropriate:
		var color = this.color;
		if (this.hover) {
			this.color = this.hoverColor;
		}
		// call Text's drawing method to do the real work of drawing to the canvas:
		// this super class method reference is automatically created by createjs.extends for methods overridden in the subclass:
		this.Text_draw(ctx, ignoreCache);
		// restore the default color value:
		this.color = color;
		// update hit area so the full text area is clickable, not just the characters:
		this.hitArea.graphics.clear().beginFill("#FFF").drawRect(0, 0, this.getMeasuredWidth(), this.getMeasuredHeight());
	};
	// set up the handlers for mouseover / out:
	TextLink.prototype.handleEvent = function (evt) {
		this.hover = (evt.type == "rollover");
	};
	// set up the inheritance relationship: TextLink extends Text.
	createjs.promote(TextLink, "Text");
/***************************** end text link class *****************************/
	
	
	
var canvas, stage, fp;


/* other fp vars */
var curItem;
var oldItem;
var curItemMC;
var curScreen;
var moveDir;
var moveTo;
var curFactCardState;
var curMusicState;
var avgLifetime;
var avgTimeframe;
var yourAvg;
var curVidState;
var arrBehindPho;
var curPho;
var phoCount;
var rawJapanAvg;
var rawUSAvg;
var rawWorldAvg;
var rawYourAvg;
var doEnter = false;

// content setting

	
var vIntroHea = "When you eat an egg, you’re not just eating an egg.";
var vIntroContent = "You’re eating the gas the truck used to deliver that egg, the coal used to generate electricity for it’s refrigeration, and resources used to boil, fry or poach that yummy egg. And that’s you're human footprint -- how much of the world you use in your lifetime. So, use the menu above to see how many of each item you consume during your lifetime and how that measures up with the rest of the world.";

var v0question = "How many eggs do\ryou eat each week?";
var v0usAverage = "19826";
var v0worldAverage = "13345";
var v0factHea = "Which came first - the chicken or the 1.3 tons of eggs?";
var v0factTxt1 = "19,826 eggs weighs 1.3 tons - that's about the curb weight of a Mini Cooper.";
var v0factTxt2 = "You’d need almost 57 hens laying eggs for one year for your lifetime’s consumption.";
var v0factTxt3 = "Hens produce about 211 million per day, that's 77 billion eggs every year.";
var v0behindHea = "How do you get 19,826 eggs in a dump truck?";
var v0behindTxt = "This is the Behind the Scenes video and photos of how we got all those eggs and what we did with them afterwards.";
var v0behindVid = "05129_00_Human-Footprint-_001.flv";
var v0behindPhotos = "flash/1egg.jpg,flash/2egg.jpg,flash/3egg.jpg,flash/4egg.jpg,flash/5egg.jpg";
var v0japanAverage = "27559";

var v1question = "How many newspapers\rdo you read each week?";
var v1usAverage = "5054";
var v1worldAverage = "5000";
var v1factHea = "Newspapers don't grow on trees. It takes a whole forest.";
var v1factTxt1 = "It takes about 43 trees to make a lifetime of newspapers for each U.S. citizen.";
var v1factTxt2 = "To make all of the U.S. newspapers for one year it takes 191,000,000 trees.";
var v1factTxt3 = "1000 tons more carbon dioxide a day is released in the air without these trees.";
var v1behindHea = "Did one kid deliver the 5,054 newspapers?";
var v1behindTxt = "This is the Behind the Scenes video and photos of what we did with all those newspapers after we read them all.";
var v1behindVid = "05142_00_Human-Footprint-_001.flv";
var v1behindPhotos = "flash/1newspaper.jpg,flash/2newspaper.jpg,flash/3newspaper.jpg,flash/4newspaper.jpg,flash/5newspaper.jpg";
var v1japanAverage = "19000";
			
var v2question = "How many cups of milk do\ryou drink each week?";
var v2usAverage = "26112";
var v2worldAverage = "26000";
var v2factHea = "It takes a lot of cows to make the land of milk and honey.";
var v2factTxt1 = "From the 65,000 dairy farms in the U.S. each cow pumps out 6.5 gallons each day.";
var v2factTxt2 = "There are 9.2 million American cows hard at work keeping our cereal tasty.";
var v2factTxt3 = "Collectively, dairy cows occupy a chunk of America about the size of Louisiana.";
var v2behindHea = "Was the due date the same on all that milk?";
var v2behindTxt = "This is the Behind the Scenes video and photos of what we did with all those delicious cartons of milk afterwards.";
var v2behindVid = "05128_00_Human-Footprint-_001.flv";
var v2behindPhotos = "flash/1milk.jpg,flash/2milk.jpg,flash/3milk.jpg,flash/4milk.jpg,flash/5milk.jpg";
var v2japanAverage = "19000";
		

var v3question = "How many miles do you\rdrive each day?";
var v3usAverage = "627000";
var v3worldAverage = "627111";
var v3factHea = "It's too bad you can't expense that 627,000 miles all at once.";
var v3factTxt1 = "It takes about 43 trees to make a lifetime of newspapers for each U.S. citizen.";
var v3factTxt2 = "To make all of the U.S. newspapers for one year it takes 191,000,000 trees.";
var v3factTxt3 = "1000 tons more carbon dioxide a day is released in the air without these trees.";
var v3behindHea = "Where do all those car parts come from?";
var v3behindTxt = "This is the Behind the Scenes video and photos of where we got those car parts and how we got rid of them.";
var v3behindVid = "05143_00_Human-Footprint-_001.flv";
var v3behindPhotos = "flash/1car.jpg,flash/2car.jpg,flash/3car.jpg,flash/4car.jpg,flash/5car.jpg";
var v3japanAverage = "19000";
		
var v4question = "How many bananas\rdo you eat each week?";
var v4usAverage = "5067";
var v4worldAverage = "5000";
var v4factHea = "The only thing funnier than one banana peel is 5,067 of them.";
var v4factTxt1 = "5,607 bananas will travel 11 million air miles to reach each of our mouths.";
var v4factTxt2 = "The U.S. average equals 28 pounds per year, or 1.1 tons over a lifetime.";
var v4factTxt3 = "A year's supply for the entire U.S. would take up 894 square miles.";
var v4behindHea = "Were there injuries from 5,067 banana peels?";
var v4behindTxt = "This is the Behind the Scenes video and photos of where we got all those bananas and where we retired them.";
var v4behindVid = "05127_00_Human-Footprint-_001.flv";
var v4behindPhotos = "flash/1banana.jpg,flash/2banana.jpg,flash/3banana.jpg,flash/4banana.jpg,flash/5banana.jpg";
var v4japanAverage = "19000";

var v5question = "How many cans of soda do\ryou drink each week?";
var v5usAverage = "43371";
var v5worldAverage = "25000";
var v5factHea = "If they made a 43,371-pack it would be a lot more convenient.";
var v5factTxt1 = "U.S. lifetime of soda cans stretch 3.42 miles. That's 50 football fields with end zones.";
var v5factTxt2 = "Yearly, Americans recycle enough cans to power 1,118,000 homes for one year.";
var v5factTxt3 = "Soda and beer cans are recycled at a higher rate than other aluminum containers.";
var v5behindHea = "How long did it take to line up those cans?";
var v5behindTxt = "This is the Behind the Scenes video and photos of how we stacked and lined up all those aluminum cans.";
var v5behindVid = "05126_00_Human-Footprint-_001.flv";
var v5behindPhotos = "flash/1soda.jpg,flash/2soda.jpg,flash/3soda.jpg,flash/4soda.jpg,flash/5soda.jpg";
var v5japanAverage = "19000";

var v6question = "How many showers do\ryou take each week?";
var v6usAverage = "28433";
var v6worldAverage = "28000";
var v6factHea = "It's a good thing there is more water than land on the earth.";
var v6factTxt1 = "28,433 5-minute showers equals running the water nonstop for 98 days.";
var v6factTxt2 = "28,433 7-minute showers equals running the water nonstop for 136 days.";
var v6factTxt3 = "The U.S. average equals 25 gallons of water per shower, or 700,000 in a lifetime.";
var v6behindHea = "Where did you get all those rubber ducks?";
var v6behindTxt = "This is the Behind the Scenes video and photos of how we acquired and dispensed with all the rubber ducks.";
var v6behindVid = "05130_00_Human-Footprint-_001.flv";
var v6behindPhotos = "flash/1shower.jpg,flash/2shower.jpg,flash/3shower.jpg,flash/4shower.jpg,flash/5shower.jpg";
var v6japanAverage = "19000";

var v7question = "How many potatoes do\ryou eat each week?";
var v7usAverage = "20000";
var v7worldAverage = "20111";
var v7factHea = "A potato by any other name is most probably a french fry.";
var v7factTxt1 = "20,000 potatoes equals 8, 917 pounds or 4.96 tons of potatoes.";
var v7factTxt2 = "Ireland’s annual potato harvest supplies a lifetime of potatos for only 91,000 Americans.";
var v7factTxt3 = "In a lifetime American's eat 3,500 pounds of fresh potatoes, and 6,920 processed.";
var v7behindHea = "Where do you get that many potatoes?";
var v7behindTxt = "This is the Behind the Scenes video and photos of how we collected and then removed all of those potatoes.";
var v7behindVid = "05131_00_Human-Footprint-_001.flv";
var v7behindPhotos = "flash/1potato.jpg,flash/2potato.jpg,flash/3potato.jpg,flash/4potato.jpg";
var v7japanAverage = "19000";

var v8question = "How many diapers do you think a baby needs each day?";
var v8usAverage = "3796";
var v8worldAverage = "3000";
var v8factHea = "It seems diapers hold more crude items than you'd think.";
var v8factTxt1 = "A U.S. lifetime of diapers uses 715 pounds of plastics. That's over a third of a ton.";
var v8factTxt2 = "It takes 5.65 barrels of crude oil to make one American's lifetime supply of diapers.";
var v8factTxt3 = "It takes 6 tankers worth of crude oil to manufacture one year of diapers for American babies.";
var v8behindHea = "I hope all those diapers were clean.";
var v8behindTxt = "This is the Behind the Scenes video and photos of which babies we got the diapers from and then what happened.";
var v8behindVid = "05125_00_Human-Footprint-_001.flv";
var v8behindPhotos = "flash/1diaper.jpg,flash/2diaper.jpg,flash/3diaper.jpg,flash/4diaper.jpg";
var v8japanAverage = "19000";

var v9question = "How many slices of bread\rdo you eat each day?";
var v9usAverage = "87520";
var v9worldAverage = "87000";
var v9factHea = "An 87,520 slice sandwich would most likely need extra mayo.";
var v9factTxt1 = "87,520 slices of bread is about 3,796 loaves or just over 2 tons.";
var v9factTxt2 = "The average American eats his or her weight in bread about every 3 years.";
var v9factTxt3 = "Wheat consumption fell from 146 pounds per person in 2000 to 133 pounds.";
var v9behindHea = "Did you have toast for lunch that day?";
var v9behindTxt = "This is the Behind the Scenes video and photos of what was really in those bread packages and how we got rid of them.";
var v9behindVid = "05124_00_Human-Footprint-_001.flv";
var v9behindPhotos = "flash/1bread.jpg,flash/2bread.jpg,flash/3bread.jpg,flash/4bread.jpg,flash/5bread.jpg";
var v9japanAverage = "19000";

	/*<messages>
	  var v0message><![CDATA[Well, you obviously don’t use<br>that many numbers. But numbers is all we can use.]]></message>
	  var v1message><![CDATA[Wow, that’s impressive.<br>But we don’t believe you.<br>Give us a more realistic number.]]></message>
	</messages>

	<other>
	  <item><![CDATA[MENU]]></item>
	  <item><![CDATA[THE LAST ONE]]></item>
	  <item><![CDATA[THE NEXT ONE]]></item>
	  <item><![CDATA[enter]]></item>
	  <item><![CDATA[BACK TO THE FACTS]]></item>
	  <item><![CDATA[NEXT PHOTO]]></item>
	  <item><![CDATA[Look behind the scenes]]></item>
	  <item><![CDATA[U.S. AVERAGE FOR ONE LIFETIME]]></item>
	  <item><![CDATA[WORLD AVERAGE FOR ONE LIFETIME]]></item>
	  <item><![CDATA[YOUR AVERAGE FOR YOUR LIFETIME]]></item>
	  <item><![CDATA[LIFETIME AVERAGE FOR YOUR ANSWER]]></item>
	  <item><![CDATA[CLOSE]]></item>
	  <item><![CDATA[JAPAN AVERAGE<br>FOR ONE LIFETIME]]></item>
	  <item><![CDATA[USE]]></item>
	  <item><![CDATA[THIS MENU TO BEGIN AND TO GET AROUND.]]></item>
	</other>
*/



function init() {
	canvas = document.getElementById("canvas");
	createjs.MotionGuidePlugin.install();
	images = images||{};
	ss = ss||{};
	var loader = new createjs.LoadQueue(false);
	loader.installPlugin(createjs.Sound);
	loader.addEventListener("fileload", handleFileLoad);
	loader.addEventListener("complete", handleComplete);
	loader.loadManifest(lib.properties.manifest);
}
function handleFileLoad(evt) {	
	if (evt.item.type == "image") { images[evt.item.id] = evt.result; }	
}
function handleComplete(evt) {
	//This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
	var queue = evt.target;
	var ssMetadata = lib.ssMetadata;
	for(i=0; i<ssMetadata.length; i++) {
		ss[ssMetadata[i].name] = new createjs.SpriteSheet( {"images": [queue.getResult(ssMetadata[i].name)], "frames": ssMetadata[i].frames} )
	}
	fp = new lib.footprint30_Scene1();
	stage = new createjs.Stage(canvas);
	stage.addChild(fp);
	stage.enableMouseOver();	
	//Registers the "tick" event listener.
	createjs.Ticker.setFPS(lib.properties.fps);
	createjs.Ticker.addEventListener("tick", tick);	    
	//Code to support hidpi screens and responsive scaling.
	(function(isResp, respDim, isScale, scaleType) {		
		var lastW, lastH, lastS=1;		
		window.addEventListener('resize', resizeCanvas);		
		resizeCanvas();		
		function resizeCanvas() {			
			var w = lib.properties.width, h = lib.properties.height;			
			var iw = window.innerWidth, ih=window.innerHeight;			
			var pRatio = window.devicePixelRatio, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
			if(isResp) {                
				if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
					sRatio = lastS;                
				}				
				else if(!isScale) {					
					if(iw<w || ih<h)						
						sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==1) {					
					sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==2) {					
					sRatio = Math.max(xRatio, yRatio);				
				}			
			}			
			canvas.width = w*pRatio*sRatio;			
			canvas.height = h*pRatio*sRatio;
			canvas.style.width = w*sRatio+'px';			
			canvas.style.height = h*sRatio+'px';
			stage.scaleX = pRatio*sRatio;			
			stage.scaleY = pRatio*sRatio;			
			lastW = iw; lastH = ih; lastS = sRatio;		
		}
	})(false,'both',false,1);
	
	stage.enableMouseOver(10);
	
	//var showme = this;
	//console.log("this: " + showme);
	
	
	// init functions
	// init vars
	curScreen = "intro";
	console.log("curScreen: " + curScreen);
	curItem = 99;
	oldItem = 99;
	fp.curItemMC = new createjs.MovieClip(null, 0, false);
	fp.curItemMC = fp.mcEggs;
	moveDir = "move_left";
	moveTo = "question";
	curFactCardState = "off";
	curMusicState = "on";
	avgLifetime = 77.75;
	avgTimeframe = 52;
	// set other text
	setOtherContent();
	// start audio
	var auGame = createjs.Sound.play("background_loop", {loop:-1});
	auGame.volume = 0.3;
	var auIntro = createjs.Sound.play("m_intro");
	auIntro.volume = 0.2;
	//auIntro.start();
	//auGame.start(0, 999);
	// init intro
	hideAll();
	//clearTxt();
	//fp.mcMenuMoves.gotoAndPlay("enter");
	console.log("hideAll called");
	showIntro()
	console.log("showIntro called");
	showMenu();
	console.log("showMenu called");
	
	// Create and place our text field on the canvas
/*const textField = new TextInput();
textField.y = textField.x = 100;
textField.placeHolder = "Input Field"; // updates the default text
stage.addChild(textField);*/

/*var input = new CanvasInput({
  canvas: document.getElementById('canvas'),
  fontSize: 18,
  fontFamily: 'franklin-gothic-urw',
  fontColor: '#212121',
  fontWeight: 'bold',
  width: 300,
  padding: 8,
  borderWidth: 1,
  borderColor: '#000',
  borderRadius: 3,
  boxShadow: '1px 1px 0px #fff',
  innerShadow: '0px 0px 5px rgba(0, 0, 0, 0.5)',
  placeHolder: 'Enter message here...'
});*/
	
	

// menu buttons rollovers
fp.mcMenuMoves.mcMenu.butMenuEggs.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuNewspapers.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuMilks.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuCarMiles.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuBananas.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuSodas.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuShowers.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuPotatoes.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuDiapers.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
fp.mcMenuMoves.mcMenu.butMenuSlices.on("rollover", function(evt) {
		playSound("m_menu_rollover", false);
	});
		
	
// menu buttons click
//fp.mcMenuMoves.mcMenu.butMenuNext.on("click", function(evt) {
//	//console.log("butMenuNext clicked");
//	showMenu();
//});
fp.mcMenuMoves.mcMenu.butMenuEggs.on("click", function(evt) {
	menuClick(0, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuNewspapers.on("click", function(evt) {
	menuClick(1, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuMilks.on("click", function(evt) {
	menuClick(2, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuCarMiles.on("click", function(evt) {
	menuClick(3, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuBananas.on("click", function(evt) {
	menuClick(4, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuSodas.on("click", function(evt) {
	menuClick(5, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuShowers.on("click", function(evt) {
	menuClick(6, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuPotatoes.on("click", function(evt) {
	menuClick(7, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuDiapers.on("click", function(evt) {
	menuClick(8, "menu");
	});
fp.mcMenuMoves.mcMenu.butMenuSlices.on("click", function(evt) {
	menuClick(9, "menu");
	});
fp.mcMenuMoves.butMenu.on("rollover", function(evt) {
	showMenu();
	});	
/*fp.mcMenuMoves.butMenu.on("click", function(evt) {
	showMenu();
	});*/

/* buttons */
fp.mcQuestion.butEnter.on("click", function(evt) {
	//var colorEnter = new Color(txtEnter);
	//colorEnter.setRGB(0x4c4c4c);
	hideMenu();
	calculateAvg();
	curScreen = "answer";
	showAnswer();
	//clearTxt();
});

fp.mcMessagesMove.mcMessages.butMessagesClose.butMessagesCloseBut.on("click", function(evt) {
	//var colorClose:Color = new Color(txtClose);
	//colorClose.setRGB(0xcccccc)
	console.log("close clicked");
	hideMessages();
});

	///////// good code commented out to supress error
fp.mcFactCardMoves.mcFactcard.butBehind.butBehindBut.on("click", function(evt) {
	//if (curMusicState == "on") {
		//auBehindForward.start();
	//}
	console.log("butBehind clicked");
	fp.mcFactCardMoves.mcFactcard.butBehind.txtBehind.alpha = 80;
	curScreen = "behind";
	moveEnvironment(moveDir);
});

fp.mcBehind.butBackToFacts.butBackToFactsBut.on("click", function(evt) {
	//var colorBackToFacts:Color = new Color(txtBackToFacts);
	//colorBackToFacts.setRGB(0x4c4c4c);
	//var colorBakArrow:Color = new Color(mcBakArrow);
	//colorBakArrow.setRGB(0x479cb8);
	fp.mcBehind.butBackToFacts.mcBakArrow.alpha = 50;
	//if (curMusicState == "on") {
		//auBehindBack.start();
	//}
	//stopVid();
	curScreen = "question-answer";
	var moveDirBehind;
	if (moveDir == "move_left") {
		moveDirBehind = "move_right";
	} else {
		moveDirBehind = "move_left";
	}
	moveEnvironment(moveDirBehind);
});

/*butBackToFacts.onRollOver = function() {
	var colorBackToFacts:Color = new Color(txtBackToFacts);
	colorBackToFacts.setRGB(0x333333);
	var colorBakArrow:Color = new Color(mcBakArrow);
	colorBakArrow.setRGB(0xffffff);
	mcBakArrow._alpha = 100;
}

butBackToFacts.onRollOut = function() {
	var colorBackToFacts:Color = new Color(txtBackToFacts);
	colorBackToFacts.setRGB(0x4c4c4c);
	var colorBakArrow:Color = new Color(mcBakArrow);
	colorBakArrow.setRGB(0x479cb8);
	mcBakArrow._alpha = 50;
}*/


fp.mcBehind.butBehindNextPho.butBehindNextPhoBut.on("click", function(evt) {
	//var colorNextPho = new Color(txtBehindNextPho);
	//colorNextPho.setRGB(0x4c4c4c);
	//var colorNextArrow = new Color(mcNextArrow);
	//colorNextArrow.setRGB(0x479cb8);
	//fp.mcBehind.mcNextArrow.alpha = 50;
	nextPho();
});

/*butBehindNextPho.onRollOver = function() {
	var colorNextPho:Color = new Color(txtBehindNextPho);
	colorNextPho.setRGB(0x333333);
	var colorNextArrow:Color = new Color(mcNextArrow);
	colorNextArrow.setRGB(0xffffff);
	mcNextArrow._alpha = 100;
}

butBehindNextPho.onRollOut = function() {
	var colorNextPho:Color = new Color(txtBehindNextPho);
	colorNextPho.setRGB(0x4c4c4c);
	var colorNextArrow:Color = new Color(mcNextArrow);
	colorNextArrow.setRGB(0x479cb8);
	mcNextArrow._alpha = 50;
}*/

fp.mcMenuMoves.mcMenu.butMenuLast.on("click", function(evt) {
	var lastItem;
	if (curItem > 0) {
		lastItem = curItem - 1;
	} else {
		lastItem = 9;
	}
	menuClick(lastItem, "last");
});

/*butMenuLast.onRollOver = function() {
	if (curMusicState == "on") {
		auMenuOver.start();
	}
}*/

fp.mcMenuMoves.mcMenu.butMenuNext.on("click", function(evt) {
	var nextItem;
	if (curItem < 9) {
		nextItem = curItem + 1;
	} else {
		nextItem = 0;
	}
	menuClick(nextItem, "next");
});

fp.butMute.butMuteBut.on("click", function(evt) {
	if (curMusicState == "on") {
		stopSound();
	} else {
		startSound();
	}
});

/*butMenuNext.onRollOver = function() {
	if (curMusicState == "on") {
		auMenuOver.start();
	}
}*/

/*butMessagesClose.onRollOver = function() {
	var colorClose:Color = new Color(txtClose);
	colorClose.setRGB(0xffffff);
}

butMessagesClose.onRollOut = function() {
	var colorClose:Color = new Color(txtClose);
	colorClose.setRGB(0xcccccc);
}*/

}

/*fp.mcQuestion.butEnter.on("click", function(evt) {
	var colorEnter = new Color(txtEnter);
	colorEnter.setRGB(0x4c4c4c);
}

fp.mcQuestion.butEnter.on("click", function(evt) {
	var colorEnter = new Color(txtEnter);
	colorEnter.setRGB(0x4c4c4c);
}

fp.mcQuestion.butEnter.on("click", function(evt) {
	var colorEnter = new Color(txtEnter);
	colorEnter.setRGB(0x990000);
}

fp.mcQuestion.butEnter.onR("click", function(evt) {
	var colorEnter = new Color(txtEnter);
	colorEnter.setRGB(0x4c4c4c);
}*/

//fp.mcQuestion.butEnter.on("click", function(evt) {
	



/*butBehind.onRollOver = function() {
	txtBehind._alpha = 100;
	if (curMusicState == "on") {
		auBehindOver.start();
	}
}

butBehind.onRollOut = function() {
	txtBehind._alpha = 80;
}

butBehindNextPho.onPress = function() {
	var colorNextPho:Color = new Color(txtBehindNextPho);
	colorNextPho.setRGB(0x4c4c4c);
	var colorNextArrow:Color = new Color(mcNextArrow);
	colorNextArrow.setRGB(0x479cb8);
	mcNextArrow._alpha = 50;
	nextPho();
}

butBehindNextPho.onRollOver = function() {
	var colorNextPho:Color = new Color(txtBehindNextPho);
	colorNextPho.setRGB(0x333333);
	var colorNextArrow:Color = new Color(mcNextArrow);
	colorNextArrow.setRGB(0xffffff);
	mcNextArrow._alpha = 100;
}

butBehindNextPho.onRollOut = function() {
	var colorNextPho:Color = new Color(txtBehindNextPho);
	colorNextPho.setRGB(0x4c4c4c);
	var colorNextArrow:Color = new Color(mcNextArrow);
	colorNextArrow.setRGB(0x479cb8);
	mcNextArrow._alpha = 50;
}*/


function tick(event) {
	stage.update();
}
function playSound(id, loop) {
	return createjs.Sound.play(id, createjs.Sound.INTERRUPT_EARLY, 0, 0, loop);
}

/*------------------------------------------------------------------------------------------*/


		
/*function test() {
	console.log("test!");
}*/

/* intro function */
function showIntro() {
	setIntroContent();
	fp.mcIntro.visible = true;
	console.log("curScreen: " + curScreen);
}

/* main functions */
function showAnswer() {
	if (yourAvg != -1) {
		showData();
	}
}

function showBehind() {
	doEnter = false;
	// stop music
	//if (curMusicState == "on") {
		//auGame.stop();
	//}
	fp.curItemMC.gotoAndStop("stop");
	setBehindContent();
	fp.mcBehind.visible = true;
}

function showData(ani) {
	setAvgContent();
	fp.mcData.visible = true;
	if (ani != false) {
		fp.mcData.mcJapanAvg.y = 535;
		fp.mcData.mcUSAvg.y = 535;
		fp.mcData.mcWorldAvg.y = 535;
		fp.mcData.mcYourAvg.y = 535;
		animateData();
	}
	setFactContent();
	fp.mcFactCardMoves.visible = true;
}

function animateData() {
	doEnter = false;
	fp.mcQuestion.butEnter.enabled = false;
	/*var tweenMe = createjs.Tween.get(fp.mcQuestion.butEnter, {loop: false})
			.to({y: fp.mcQuestion.butEnter.y + 100}, 1500, createjs.Ease.getPowOut(5));*/
	//tweenMe.start();
			
			
	// order & check range
	var arrAvgs = [];
	arrAvgs.push({mc: "mcUSAvg", avg: rawUSAvg});
	arrAvgs.push({mc: "mcJapanAvg", avg: rawJapanAvg});
	arrAvgs.push({mc: "mcWorldAvg", avg: rawWorldAvg});
	arrAvgs.push({mc: "mcYourAvg", avg: rawYourAvg});
	//arrAvgs.sort("avg", Array.DESCENDING | Array.NUMERIC);
	//var arrAvgs = [{"mcUSAvg": rawUSAvg, "mcJapanAvg": rawJapanAvg],["mcWorldAvg", rawWorldAvg],["mcYourAvg", rawYourAvg]];
	//arrAvgs.sort(arrAvgs[], Array.DESCENDING | Array.NUMERIC);
	/*arrAvgs.sort(function(a,b){ //Array now becomes [41, 25, 8, 7]
		return b - a
	})*/
	arrAvgs.sort(function(a, b) {
		return parseFloat(b.avg) - parseFloat(a.avg);
	});




	//arrAvgs.push[mc: "mcJapanAvg", avg: rawJapanAvg]
	//arrAvgs.push[mc: "mcWorldAvg", avg: rawWorldAvg];
	//arrAvgs.push[mc: "mcYourAvg", avg: rawYourAvg];
	// set order
	var top;
	var topMC;
	var mid1;
	var mid1MC;
	var mid2;
	var mid2MC;
	var low;
	var lowMC;
	
	

	top = arrAvgs[0].avg;

	topMC = arrAvgs[0].mc;

	mid1 = arrAvgs[1].avg;

	mid1MC = arrAvgs[1].mc;

	mid2 = arrAvgs[2].avg;

	mid2MC = arrAvgs[2].mc;

	low = arrAvgs[3].avg;

	lowMC = arrAvgs[3].mc;	
	
	
	//top = arrAvgs[0][1];
	console.log("top: " + top);
	//topMC = arrAvgs[0][0];
	console.log("topMC: " + topMC);
	//mid1 = arrAvgs[1][1];
	console.log("mid1: " + mid1);
	//mid1MC = arrAvgs[1][0];
	console.log("mid1MC: " + mid1MC);
	//mid2 = arrAvgs[2][1];
	console.log("mid2: " + mid2);
	//mid2MC = arrAvgs[2][0];
	console.log("mid2MC: " + mid2MC);
	//low = arrAvgs[3][1];
	console.log("low: " + low);
	//lowMC = arrAvgs[3][0];
	console.log("lowMC: " + lowMC);
	// percentage difference between all
	var topPercent = top/top;
	console.log("topPercent: " + topPercent);
	var mid1Percent = mid1/top;
	console.log("mid1Percent: " + mid1Percent);
	var mid2Percent = mid2/top;
	console.log("mid2Percent: " + mid2Percent);
	var lowPercent = low/top;
	console.log("lowPercent: " + lowPercent);
	var percentRange = topPercent - lowPercent;	
	console.log("percentRange: " + percentRange);
	var minY = 50;
	var maxY = 410;
	var rangeY = maxY - minY;
	console.log("rangeY: " + rangeY);
	var topMCY = maxY - (rangeY * topPercent);
	var mid1MCY = maxY - (rangeY * mid1Percent);
	var mid2MCY = maxY - (rangeY * mid2Percent);
	var lowMCY = maxY - (rangeY * lowPercent);
	// space out mcs from top
	if (mid1MCY <= (topMCY + 68)) {
		mid1MCY = mid1MCY + 64;
	}
	if (mid2MCY <= (mid1MCY + 68)) {
		if (mid2MCY <= mid1MCY) {
			mid2MCY = mid1MCY;
		}
		mid2MCY = mid2MCY + 64;
	}
	if (lowMCY <= (mid2MCY + 68)) {
		if (lowMCY <= mid2MCY) {
			lowMCY = mid2MCY;
		}
		lowMCY = lowMCY + 64;
	}
	// space out mcs from bottom
	if (lowMCY > maxY) {
		lowMCY = maxY;
	}
	if (mid2MCY + 68 >= lowMCY) {
		mid2MCY = lowMCY - 64;
	}
	if (mid1MCY + 68 >= mid2MCY) {
		mid1MCY = mid2MCY - 64;
	}
	
	
	console.log("topMCY: " + topMCY);
	console.log("mid1MCY: " + mid1MCY);
	console.log("mid2MCY: " + mid2MCY);	
	console.log("lowMCY: " + lowMCY);
	
	console.log("fp.mcData[topMC].y: " + fp.mcData[topMC].y);
	console.log("fp.mcData[mid1MC].y: " + fp.mcData[mid1MC].y);
	console.log("fp.mcData[mid2MC].y: " + fp.mcData[mid2MC].y);	
	console.log("fp.mcData[lowMC].y: " + fp.mcData[lowMC].y);
	
	// tween avg mcs
	//var tweenTop = new Tween(mcData[topMC], "y", mx.transitions.easing.Strong.easeOut, 535, topMCY, .8, true);
	//tweenTop.stop();
	
	
	tweenTop = createjs.Tween.get(fp.mcData[topMC], {loop: false})
			.to({y: topMCY}, 800, createjs.Ease.getPowOut(2.5)).call(playMid1);
	
	function playMid1() {
		tweenMid1 = createjs.Tween.get(fp.mcData[mid1MC], {loop: false})
				.to({y: mid1MCY}, 800, createjs.Ease.getPowOut(2.5)).call(playMid2);
	}
	function playMid2() {
		tweenMid2 = createjs.Tween.get(fp.mcData[mid2MC], {loop: false})
			.to({y: mid2MCY}, 800, createjs.Ease.getPowOut(2.5)).call(playLow);
	}
	function playLow() {
		tweenLow = createjs.Tween.get(fp.mcData[lowMC], {loop: false})
				.to({y: lowMCY}, 800, createjs.Ease.getPowOut(2.5));
	}
	
	
	
	/*var tweenMe = createjs.Tween.get(fp.mcQuestion.butEnter, {loop: false})
			.to({y: fp.mcQuestion.butEnter.y + 100}, 1500, createjs.Ease.getPowOut(5));
	tweenMe.start();*/
	
	//this.timeline.addTween(cjs.Tween.get(this).call(this.frame_0).wait(1).call(this.frame_1).wait(48).call(this.frame_49).wait(1).call(this.frame_50).wait(1).call(this.frame_51).wait(48).call(this.frame_99).wait(1));
	
	// good code commented out
	/*var tweenMid1 = new Tween(mcData[mid1MC], "y", mx.transitions.easing.Strong.easeOut, 535, mid1MCY, .8, true);
	tweenMid1.stop();
	var tweenMid2 = new Tween(mcData[mid2MC], "y", mx.transitions.easing.Strong.easeOut, 535, mid2MCY, .8, true);
	tweenMid2.stop();
	var tweenLow = new Tween(mcData[lowMC], "y", mx.transitions.easing.Strong.easeOut, 535, lowMCY, .8, true);
	tweenLow.stop();*/

	/*tweenTop.onMotionStarted = function() {
		callData();
	};

	tweenMid1.onMotionStarted = function() {
		callData();
	};	

	tweenMid1.onMotionFinished = function() {
		tweenMid2.start();
	};

	tweenMid2.onMotionStarted = function() {
		callData();
	};
	tweenMid2.onMotionFinished = function() {
		tweenLow.start();
	};

	tweenLow.onMotionStarted = function() {
		callData();
	};*/

	//tweenLow.onMotionFinished = function() {
		doEnter = true;
		fp.mcQuestion.butEnter.enabled = true;
		console.log("curFactCardState: " + curFactCardState);
		if (curFactCardState == "off") {
			curFactCardState = "on";
			fp.mcFactCardMoves.gotoAndStop(0);
			fp.mcFactCardMoves.mcFactcard.gotoAndStop(0);
			fp.mcFactCardMoves.gotoAndPlay("enter");
		}
	//}
	//tweenTop.start();	
}

function showQuestion() {
	doEnter = true;
	fp.curItemMC = getItem();
	console.log("curItemMC: " + curItemMC);
	fp.curItemMC.visible = true;
	fp.curItemMC.gotoAndPlay("play");
	setQuestionContent();
	fp.mcQuestion.visible = true;
	var setData = document.getElementById("setData");
	setData.value = "";
	setData.style.display = "block";
	setData.focus();
	//Selection.setFocus("txtInput");
}

function showQuestionAnswer() {
	doEnter = true;
	fp.curItemMC = getItem();
	fp.curItemMC.gotoAndPlay("play");
	fp.curItemMC.visible = true;
	setQuestionContent();
	fp.mcQuestion.visible = true;
	var setData = document.getElementById("setData");
	setData.style.display = "block";
	setData.blur();
	if (curFactCardState == "off") {
		curFactCardState = "on";
		fp.mcFactCardMoves.mcFactcard.gotoAndStop(0);
		fp.mcFactCardMoves.gotoAndStop(0);
		fp.mcFactCardMoves.gotoAndPlay("enter");
	}
	showData(false);
}

function showMessages(msg) {
	doEnter = false;
	fp.mcQuestion.butEnter.enabled = false;
	document.getElementById("setData").style.display = "none";
	//xmlNodeHandler = xmlRootHandler[2].childNodes;
	//var txtfMessages:TextFormat = new TextFormat();
	//txtfMessages.letterSpacing = -.7;
	//txtfMessages.kerning = true;
	//txtMessages.setNewTextFormat(txtfMessages);
	if (msg == 0) {
		fp.mcMessagesMove.mcMessages.txtMessages.text = "Well, you obviously don’t use\rthat many numbers. But numbers is all we can use.";
	} else {
		fp.mcMessagesMove.mcMessages.txtMessages.text = "Wow, that’s impressive\rBut we don’t believe you.\rGive us a more realistic number.";
	}
	fp.mcMessagesMove.gotoAndPlay("enter");
}

function hideMessages() {
	console.log("hideMessages called");
	console.log("curframe: " + fp.mcMessagesMove.currentFrame);
	if (fp.mcMessagesMove.currentFrame == 9) {
		doEnter = true;
		fp.mcQuestion.butEnter.enabled = true;
		//document.getElementById("setData").style.display = "block";
		//document.getElementById("setData").value = "";
		//txtInput.text = "";
		//Selection.setFocus("txtInput");
		fp.mcMessagesMove.gotoAndPlay("exit");
	}
}

function menuClick(item, but) {
	console.log("itemx: " + item);
	hideMenu();
	if (curItem != item) {
		hideMessages();
		fp.curItemMC.gotoAndStop("stop");
		/*if (curMusicState == "on") {
			auTransition.start();
		}
		stopVid();*/
		//var auTransition = playSound("m_transition", false);
		//auTransition.volume = 0.2;
		curScreen = "question";
		//txtInput.text = "";
		oldItem = curItem;
		curItem = item;
		if (but == "last") {
			moveDir = "move_left";
		} else if (but == "next") {
			moveDir = "move_right";
		} else {
			if (curItem > oldItem) {
				moveDir = "move_right";
			} else {
				moveDir = "move_left";
			}
		}
		moveEnvironment(moveDir);
	}
}

//this.showBehind = function() {}
//this.pulse();


function showBehind() {
	doEnter = false;
	// stop music
	/*if (curMusicState == "on") {
		auGame.stop();
	}*/
	fp.curItemMC.gotoAndStop("stop");
	setBehindContent();
	fp.mcBehind.visible = true;
}

function moveEnvironment(dir) {
	hideAll();
	doEnter = false;
	//console.log(dir);
	fp.mcCloud1Moves.gotoAndPlay(dir);
	fp.mcCloud2Moves.gotoAndPlay(dir);
	fp.mcGroundMoves.gotoAndPlay(dir);
	fp.mcMountainMoves.gotoAndPlay(dir);
	fp.mcTreesMoves.gotoAndPlay(dir);
	//fp.mcTreesMoves.onAnimationEnd = test();
	//console.log("end moveEnviro");
}

// content
function setIntroContent() {
	//xmlNodeHandler = xmlRootHandler[0].childNodes;
	//var txtfIntroHea = new TextFormat();
	//txtfIntroHea.letterSpacing = -1.5;
	//txtfIntroHea.kerning = true;
	//fp.mcIntro.txtIntroHea.setNewTextFormat(txtfIntroHea);
	fp.mcIntro.txtIntroHea.text = "When you eat an egg, you’re not just eating an egg.\n\n";
	//var txtfIntroTxt = new TextFormat();
	//txtfIntroTxt.letterSpacing = -.05;
	//txtfIntroTxt.kerning = true;
	//fp.mcIntro.txtIntroTxt.setNewTextFormat(txtfIntroTxt);
	fp.mcIntro.txtIntroTxt.text = "You’re eating the gas the truck used to deliver that egg, the coal used to generate electricity for it’s refrigeration, and resources used to boil, fry or poach that yummy egg. And that’s you're human footprint — how much of the world you use in your lifetime. So, use the menu above to see how many of each item you consume during your lifetime and how that measures up with the rest of the world.\n\n";
}


function setOtherContent() {
	//xmlNodeHandler = xmlRootHandler[3].childNodes;
	//var txtfOther = new TextFormat();
	//txtfOther.letterSpacing = -.5;
	//txtfOther.kerning = true;
	fp.mcMenuMoves.butMenu.txtMenu.text = "MENU";
	//fp.txtMenuLast.setNewTextFormat(txtfOther);
	fp.mcMenuMoves.mcMenu.mcMenuLast.txtMenuLast.text = "THE LAST ONE";
	//fp.txtMenuNext.setNewTextFormat(txtfOther);
	fp.mcMenuMoves.mcMenu.mcMenuNext.txtMenuNext.text = "THE NEXT ONE";
	fp.mcQuestion.butEnter.txtEnter.text = "enter";
	fp.mcBehind.butBackToFacts.txtBackToFacts.text = "BACK TO THE FACTS";
	fp.mcBehind.butBehindNextPho.txtBehindNextPho.text = "NEXT PHOTO";
	//fp.txtBehind.setNewTextFormat(txtfOther);
	fp.mcFactCardMoves.mcFactcard.butBehind.txtBehind.text = "Look behind\rthe scenes";
	fp.mcFactCardMoves.mcFactcard.butBehind.txtBehind.alpha = 80;
	//fp.txtJapanAvgOther.setNewTextFormat(txtfOther);
	fp.mcData.mcJapanAvg.txtJapanAvgOther.text = "JAPAN AVERAGE\rFOR ONE LIFETIME";
	//fp.txtUSAvgOther.setNewTextFormat(txtfOther);
	fp.mcData.mcUSAvg.txtUSAvgOther.text = "U.S. AVERAGE FOR ONE LIFETIME";	
	//fp.txtWorldAvgOther.setNewTextFormat(txtfOther);
	fp.mcData.mcWorldAvg.txtWorldAvgOther.text = "WORLD AVERAGE FOR ONE LIFETIME";
	//fp.txtYourAvgOther.setNewTextFormat(txtfOther);
	fp.mcData.mcYourAvg.txtYourAvgOther.text = "YOUR AVERAGE FOR YOUR LIFETIME";
	//var txtfClose = new TextFormat();
	//txtfClose.letterSpacing = 2;
	//txtfClose.kerning = true;
	//fp.txtClose.setNewTextFormat(txtfClose);
	fp.mcMessagesMove.mcMessages.butMessagesClose.txtClose.text = "CLOSE";	
	//fp.txtUse.setNewTextFormat(txtfOther);
	fp.mcIntro.txtUse.text = "USE";
	//fp.txtThisMenu.setNewTextFormat(txtfOther);
	fp.mcIntro.txtThisMenu.text = "THIS MENU TO BEGIN AND TO GET AROUND.";
}

function setQuestionContent() {
	//xmlNodeHandler = xmlRootHandler[1].childNodes;
	//xmlNodeHandler2 = xmlNodeHandler[curItem].childNodes;
	//var txtfQuestion = new TextFormat();
	//txtfQuestion.letterSpacing = -1.7;
	//txtfQuestion.kerning = true;
	//fp.mcQuestion.txtQuestion.setNewTextFormat(txtfQuestion);
	//txtQuestion.htmlText = xmlNodeHandler2[0].firstChild.nodeValue;
	if (curItem == 0) {
		fp.mcQuestion.txtQuestion.text = "How many eggs do\ryou eat each week?";
	} else if (curItem == 1) {
		fp.mcQuestion.txtQuestion.text = "How many newspapers\rdo you read each week?";
	} else if (curItem == 2) {
		fp.mcQuestion.txtQuestion.text = "How many cups of milk do\ryou drink each week?";
	} else if (curItem == 3) {
		fp.mcQuestion.txtQuestion.text = "How many miles do you\rdrive each day?";
	} else if (curItem == 4) {
		fp.mcQuestion.txtQuestion.text = "How many bananas\rdo you eat each week?";
	} else if (curItem == 5) {
		fp.mcQuestion.txtQuestion.text = "How many cans of soda do\ryou drink each week?";
	} else if (curItem == 6) {
		fp.mcQuestion.txtQuestion.text = "How many showers do\ryou take each week?";
	} else if (curItem == 7) {
		fp.mcQuestion.txtQuestion.text = "How many potatoes do\ryou eat each week?";
	} else if (curItem == 8) {
		fp.mcQuestion.txtQuestion.text = "How many diapers do you think a baby needs each day?";
	} else if (curItem == 9) {
		fp.mcQuestion.txtQuestion.text = "How many slices of bread\rdo you eat each day?";
	}
}

function setAvgContent() {
	//xmlNodeHandler = xmlRootHandler[1].childNodes;
	//xmlNodeHandler2 = xmlNodeHandler[curItem].childNodes;
	rawUSAvg = eval("v" + curItem + "usAverage");
	var strUSAvg = addCommas(rawUSAvg);
	fp.mcData.mcUSAvg.txtUSAvg.text = strUSAvg;
	rawWorldAvg = eval("v" + curItem + "worldAverage");
	var strWorldAvg = addCommas(rawWorldAvg);
	fp.mcData.mcWorldAvg.txtWorldAvg.text = strWorldAvg;
	rawJapanAvg =  eval("v" + curItem + "japanAverage");
	var strJapanAvg = addCommas(rawJapanAvg);
	fp.mcData.mcJapanAvg.txtJapanAvg.text = strJapanAvg;
	rawYourAvg = yourAvg;
	var strYourAvg = addCommas(rawYourAvg);
	fp.mcData.mcYourAvg.txtYourAvg.text = strYourAvg;
	if (curItem == 8) {
		//xmlNodeHandler = xmlRootHandler[3].childNodes;
		//txtYourAvgOther.text = xmlNodeHandler[10].firstChild.nodeValue;
		fp.mcData.mcYourAvg.txtYourAvgOther.text = "LIFETIME AVERAGE FOR YOUR ANSWER";
	} else {
		//xmlNodeHandler = xmlRootHandler[3].childNodes;
		//txtYourAvgOther.text = xmlNodeHandler[9].firstChild.nodeValue;
		fp.mcData.mcYourAvg.txtYourAvgOther.text = "YOUR AVERAGE FOR YOUR LIFETIME";
	}
}

function setFactContent() {
	//xmlNodeHandler = xmlRootHandler[1].childNodes;
	//xmlNodeHandler2 = xmlNodeHandler[curItem].childNodes;
	//var txtfFactHea:TextFormat = new TextFormat();
	//txtfFactHea.letterSpacing = -1;
	//txtfFactHea.kerning = true;
	//txtFactHea.setNewTextFormat(txtfFactHea);
	//var txtfFactTxt:TextFormat = new TextFormat();
	//txtfFactTxt.letterSpacing = -.5;
	//txtfFactTxt.kerning = true;
	//txtFactTxt1.setNewTextFormat(txtfFactTxt);
	//txtFactTxt2.setNewTextFormat(txtfFactTxt);
	//txtFactTxt3.setNewTextFormat(txtfFactTxt);
	console.log("setFactContent");
	console.log("curItem: " + curItem);
	if (curItem == 0) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v0factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v0factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v0factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v0factTxt3;
	} else if (curItem == 1) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v1factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v1factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v1factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v1factTxt3;
	} else if (curItem == 2) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v2factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v2factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v2factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v2factTxt3;
	} else if (curItem == 3) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v3factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v3factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v3factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v3factTxt3;
	} else if (curItem == 4) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v4factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v4factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v4factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v4factTxt3;
	} else if (curItem == 5) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v5factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v5factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v5factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v5factTxt3;
	} else if (curItem == 6) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v6factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v6factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v6factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v6factTxt3;
	} else if (curItem == 7) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v7factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v7factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v7factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v7factTxt3;
	} else if (curItem == 8) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v8factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v8factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v8factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v8factTxt3;
	} else if (curItem == 9) {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v9factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v9factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v9factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v9factTxt3;
	} else {
		fp.mcFactCardMoves.mcFactcard.txtFactHea.text = v0factHea;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt1.text = v0factTxt1;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt2.text = v0factTxt2;
		fp.mcFactCardMoves.mcFactcard.txtFactTxt3.text = v0factTxt3;
	}
	fp.mcFactCardMoves.mcFactcard.factgraphics.gotoAndStop(curItem);
}

function setBehindContent() {
	//xmlNodeHandler = xmlRootHandler[1].childNodes;
	//xmlNodeHandler2 = xmlNodeHandler[curItem].childNodes;
	//var txtfBehindHea:TextFormat = new TextFormat();
	//txtfBehindHea.letterSpacing = -1.3;
	//txtfBehindHea.kerning = true;
	//txtBehindHea.setNewTextFormat(txtfBehindHea);
	fp.mcBehind.txtBehindHea.text = eval("v" + curItem + "behindHea");
	//var txtfBehindTxt:TextFormat = new TextFormat();
	//txtfBehindTxt.letterSpacing = .2;
	//txtfBehindTxt.kerning = true;
	//txtBehindTxt.setNewTextFormat(txtfBehindTxt);
	fp.mcBehind.txtBehindTxt.text = eval("v" + curItem + "behindTxt");
	//var strBehindVid = xmlNodeHandler2[9].firstChild.nodeValue;
	//flvBehindVid.contentPath = strBehindVid;
	//restartVid();
	var strBehindPho = eval("v" + curItem + "behindPhotos");
	console.log("strBehindPho: " + strBehindPho);
	arrBehindPho = strBehindPho.split(",");
	console.log("arrBehindPho: " + arrBehindPho);
	curPho = 0;
	phoCount = arrBehindPho.length;
	
	var image = new Image();
	image.src = arrBehindPho[curPho];
	image.onload = handleImageLoad;
			
	//fp.mcBehind.mcBehindPho.loadMovie(arrBehindPho[curPho]);
	//var tmNextPho:TransitionManager = new TransitionManager(mcBehindPho);
	//tmNextPho.startTransition({type:Fade, direction:Transition.IN, duration:.5, easing:None.easeNone});
	if (phoCount <= 1) {
		fp.mcBehind.butBehindNextPho.visible = false;
	}
}

function nextPho() {
	console.log("nextPho called");
	if (curPho < (phoCount - 1)) {
		curPho++;
	} else {
		curPho = 0;
	}
	//var tmNextPho:TransitionManager = new TransitionManager(mcBehindPho);
	//tmNextPho.startTransition({type:Fade, direction:Transition.OUT, duration:.5, easing:None.easeNone});
	//var lisNextPho:Object = new Object();
	//lisNextPho.allTransitionsOutDone = function(eventObj:Object) {
		//trace("allTransitionsOutDone event occurred.");
		//mcBehindPho.loadMovie(arrBehindPho[curPho]);
		
		var image = new Image();
		image.src = arrBehindPho[curPho];
		image.onload = handleImageLoad;
	
		//tmNextPho.startTransition({type:Fade, direction:Transition.IN, duration:.5, easing:None.easeNone});
	//};
	//tmNextPho.addEventListener("allTransitionsOutDone", lisNextPho);
}

function handleImageLoad(event) {
	var image = event.target;
	var bitmap = new createjs.Bitmap(image);
	fp.mcBehind.mcBehindPho.addChild(bitmap);
	stage.update();
}

function stopSound() {
	/*stopAllSounds();*/
	fp.butMute.gotoAndStop("off");
	curMusicState = "off"
	createjs.Sound.volume = 0.0;
}

function startSound() {
	//auGame.start(0, 999);
	fp.butMute.gotoAndStop("on");
	curMusicState = "on"
	createjs.Sound.volume = 1.0;
}


function getItem() {
	if (curItem == 0) {
		return fp.mcEggs;
	} else if (curItem == 1) {
		return fp.mcNewspapers;
	} else if (curItem == 2) {
		return fp.mcMilks;
	} else if (curItem == 3) {
		return fp.mcCarMiles;
	} else if (curItem == 4) {
		return fp.mcBananas;
	} else if (curItem == 5) {
		return fp.mcSodas;
	} else if (curItem == 6) {
		return fp.mcShowers;
	} else if (curItem == 7) {
		return fp.mcPotatoes;
	} else if (curItem == 8) {
		return fp.mcDiapers;
	} else if (curItem == 9) {
		return fp.mcSlices;
	}
}
	//curItemMC.gotoAndStop("stop");
	//mcIntro._visible = false;

function hideAll() {
	hideMenu();
	fp.mcBehind.visible = false;
	fp.mcData.visible = false;
	fp.mcFactCardMoves.visible = false;
	fp.mcFactCardMoves.gotoAndStop(0);
	curFactCardState = "off";
	fp.curItemMC.gotoAndStop("stop");
	fp.mcIntro.visible = false;
	fp.mcQuestion.visible = false;
	var setData = document.getElementById("setData");
	//setData.value = "";
	setData.style.display = "none";
	// items (in menu order)
	fp.mcEggs.visible = false;
	fp.mcNewspapers.visible = false;
	fp.mcMilks.visible = false;
	fp.mcCarMiles.visible = false;
	fp.mcBananas.visible = false;
	fp.mcSodas.visible = false;
	fp.mcShowers.visible = false;
	fp.mcPotatoes.visible = false;
	fp.mcDiapers.visible = false;
	fp.mcSlices.visible = false;
	//fp.mcMenuMoves.visible = false;
	//fp.mcMenuMoves.mcMenu.butMenuLast.visible = false;
	//fp.mcMenuMoves.mcMenu.mcMenuLast.visible = false;
	//fp.mcMenuMoves.mcMenu.butMenuLast.visible = false;
	//fp.mcMenuMoves.mcMenu.mcMenuNext.visible = false;
	//fp.mcMenuMoves.mcMenu.butMenuNext.visible = false;
	
}

function hideMenu() {
	console.log("hideMenu");
	if (fp.mcMenuMoves.currentFrame == 14) {
		fp.mcMenuMoves.gotoAndPlay("exit");
	}
}

function showMenu() {
	console.log("showMenu");
	if (curScreen == "intro") {
		fp.mcMenuMoves.mcMenu.butMenuLast.visible = false;
		fp.mcMenuMoves.mcMenu.butMenuNext.visible = false;
		fp.mcMenuMoves.mcMenu.mcMenuLast.visible = false;
		fp.mcMenuMoves.mcMenu.mcMenuNext.visible = false;
	} else {
		fp.mcMenuMoves.mcMenu.butMenuLast.visible = true;
		fp.mcMenuMoves.mcMenu.butMenuNext.visible = true;
		fp.mcMenuMoves.mcMenu.mcMenuLast.visible = true;
		fp.mcMenuMoves.mcMenu.mcMenuNext.visible = true;
	}
	//fp.mcMenuMoves.visible = true;
	fp.mcMenuMoves.gotoAndPlay("enter");
}


/* helper functions */
function calculateAvg() {
	//var strInput = txtInput.text;
	//var strInput = 3;
	strInput = document.getElementById("setData").value;
	console.log("strInput = " + strInput);
	if (strInput == "0")	{
		yourAvg = 0;
	//} else if (int(strInput) == 0) {
	} else if (strInput === "") {
		yourAvg = -1;
		showMessages(0);
	} else {
		if (curItem == 3) { // car
			avgLifetime = 61.75;
			avgTimeframe = 365;
		} else if (curItem == 8) { // diapers
			avgLifetime = 3;
			avgTimeframe = 365;
		} else if (curItem == 9) { // bread
			avgTimeframe = 365;
		} else {	
			avgLifetime = 77.75;
			avgTimeframe = 52;
		}
		yourAvg = Math.round((Number(strInput) * avgTimeframe) * avgLifetime);
		console.log("yourAvg: " + yourAvg);
		if (yourAvg > 999999) {
			yourAvg = -1;
			showMessages(1);
		}
	}
}

function addCommas(theNumber) {
	numString = theNumber + ""; //convert # to string
	newString = ""; //return string
	index = 1; // string index
	trip = 0; // trip, as in triple.
	while(numString.length >= index){
  	   if (trip!=3){ //haven't reached 3 chars yet
	      newString = numString.charAt(numString.length - index) + newString; //add char	
	      index++;
	      trip++;
	   }
	   else{ //reached 3 chars, add comma
	      newString = "," + newString;
	      trip=0;
	   }
	}
	return (newString);
}

// text input functions
function clearTxt() {
	document.getElementById("setData").value = "";
}



</script>
<!-- write your code here -->
</head>
<body onload="init();" style="margin:0px;">
	<div id="dataInput"><input id="setData" type="text"></div>
	<canvas id="canvas" width="960" height="535" style="display: block; background-color:rgba(142, 228, 255, 1.00)"></canvas>
</body>
</html>